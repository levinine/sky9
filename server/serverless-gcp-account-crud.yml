functions:
  # TODO: remove before release (GCP AUTH example)
  gcpAuth:
    handler: src/handler/gcp-account-handler.gcpAuth
    events:
      - http:
          path: gcp/gcpAuth
          method: get
          cors: true
          # authorizer: ${self:custom.authorizer}
  syncBudgets:
    handler: src/handler/gcp-account-handler.syncBudgets
    timeout: 300
    events:
      - http:
          path: gcp/sync-budgets
          method: get # TODO: make post (node version issue)
          cors: true
          # TODO uncomment authorizer before deployment
          # authorizer: ${self:custom.authorizer}
      - schedule: rate(1 hour)
  syncAccounts:
    handler: src/handler/gcp-account-handler.syncAccounts
    timeout: 60
    events:
      - http:
          path: gcp/sync-accounts
          method: get # TODO: make post (node version issue)
          cors: true
          # TODO uncomment authorizer before deployment
          # authorizer: ${self:custom.authorizer}
  syncOwners:
    handler: src/handler/gcp-account-handler.syncOwners
    timeout: 60
    events:
      - http:
          path: gcp/sync-owners
          method: get # TODO: make post (node version issue)
          cors: true
          # TODO uncomment authorizer before deployment
          # authorizer: ${self:custom.authorizer}
