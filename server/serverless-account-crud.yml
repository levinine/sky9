functions:
  CreateAccount:
    handler: src/handler/account-handler.createAccount
  GetAccounts:
    handler: src/handler/account-handler.getAccounts
    events:
      - http:
          path: accounts
          method: get
          cors: true
          authorizer: ${self:custom.authorizer}
  GetAccount:
    handler: src/handler/account-handler.getAccount
    events:
      - http:
          path: accounts/{id}
          method: get
          cors: true
          authorizer: ${self:custom.authorizer}
  UpdateAccount:
    handler: src/handler/account-handler.updateAccount
    events:
      - http:
          path: accounts/{id}
          method: put
          cors: true
          authorizer: ${self:custom.authorizer}
  DeleteAccount:
    handler: src/handler/account-handler.deleteAccount
  SyncAccounts:
    handler: src/handler/account-handler.syncAccounts
    events:
      - http:
          path: sync-accounts
          method: post
          cors: true
          authorizer: ${self:custom.authorizer}
      - schedule: cron(0,30 8-18 * * ? *)
  SyncBudgets:
    handler: src/handler/account-handler.syncBudgets
    events:
      - http:
          path: sync-budgets
          method: post
          cors: true
          authorizer: ${self:custom.authorizer}
      - schedule: cron(1,31 8-18 * * ? *)
  SyncOwners:
    handler: src/handler/account-handler.syncOwners
    events:
      - http:
          path: sync-owners
          method: post
          cors: true
          authorizer: ${self:custom.authorizer}
      - schedule: cron(2,32 8-18 * * ? *)
  CreateBudget:
    handler: src/handler/account-handler.createBudget
  # TODO: remove before release (GCP AUTH example)
  gcpAuth:
    handler: src/handler/gcp-auth-handler.gcpAuth
    events:
      - http:
          path: gcp/auth
          method: get
          cors: true
